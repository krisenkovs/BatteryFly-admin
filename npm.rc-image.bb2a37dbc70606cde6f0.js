"use strict";(self.webpackChunksmartcrm=self.webpackChunksmartcrm||[]).push([[11],{3617:(e,n,t)=>{t.d(n,{Z:()=>O});var r=t(7462),o=t(1413),i=t(4942),a=t(9439),c=t(1002),s=t(4925),l=t(7294),u=t(4184),f=t.n(u),d=t(7678),v=t(1770),m=t(1575),p=t(4019),g=t(5105),w=t(334),C=t(5164);function Z(e,n,t,r){var o=n+t,a=(t-r)/2;if(t>r){if(n>0)return(0,i.Z)({},e,a);if(n<0&&o<r)return(0,i.Z)({},e,-a)}else if(n<0||o>r)return(0,i.Z)({},e,n<0?a:-a);return{}}var h=["visible","onVisibleChange","getContainer","current","countRender"],y=l.createContext({previewUrls:new Map,setPreviewUrls:function(){return null},current:null,setCurrent:function(){return null},setShowPreview:function(){return null},setMousePosition:function(){return null},registerImage:function(){return function(){return null}},rootClassName:""}),k=y.Provider;const E=function(e){var n=e.previewPrefixCls,t=void 0===n?"rc-image-preview":n,o=e.children,i=e.icons,u=void 0===i?{}:i,f=e.preview,d="object"===(0,c.Z)(f)?f:{},m=d.visible,p=void 0===m?void 0:m,g=d.onVisibleChange,w=void 0===g?void 0:g,C=d.getContainer,Z=void 0===C?void 0:C,y=d.current,E=void 0===y?0:y,P=d.countRender,b=void 0===P?void 0:P,N=(0,s.Z)(d,h),x=(0,l.useState)(new Map),S=(0,a.Z)(x,2),R=S[0],M=S[1],z=(0,l.useState)(),Y=(0,a.Z)(z,2),I=Y[0],X=Y[1],O=(0,v.Z)(!!p,{value:p,onChange:w}),G=(0,a.Z)(O,2),U=G[0],V=G[1],L=(0,l.useState)(null),A=(0,a.Z)(L,2),H=A[0],T=A[1],j=void 0!==p,F=Array.from(R.keys())[E],W=new Map(Array.from(R).filter((function(e){return!!(0,a.Z)(e,2)[1].canPreview})).map((function(e){var n=(0,a.Z)(e,2);return[n[0],n[1].url]})));return l.useEffect((function(){X(F)}),[F]),l.useEffect((function(){!U&&j&&X(F)}),[F,j,U]),l.createElement(k,{value:{isPreviewGroup:!0,previewUrls:W,setPreviewUrls:M,current:I,setCurrent:X,setShowPreview:V,setMousePosition:T,registerImage:function(e,n){var t=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=function(){M((function(n){var t=new Map(n);return t.delete(e)?t:n}))};return M((function(r){return new Map(r).set(e,{url:n,canPreview:t})})),r}}},o,l.createElement(D,(0,r.Z)({"aria-hidden":!U,visible:U,prefixCls:t,onClose:function(e){e.stopPropagation(),V(!1),T(null)},mousePosition:H,src:W.get(I),icons:u,getContainer:Z,countRender:b},N)))};var P=["prefixCls","src","alt","onClose","afterClose","visible","icons","rootClassName","countRender"],b=l.useState,N=l.useEffect,x=l.useCallback,S=l.useRef,R=l.useContext,M={x:0,y:0};const D=function(e){var n,t=e.prefixCls,c=e.src,u=e.alt,v=e.onClose,h=(e.afterClose,e.visible),k=e.icons,E=void 0===k?{}:k,D=e.rootClassName,z=e.countRender,Y=(0,s.Z)(e,P),I=E.rotateLeft,X=E.rotateRight,O=E.zoomIn,G=E.zoomOut,U=E.close,V=E.left,L=E.right,A=b(1),H=(0,a.Z)(A,2),T=H[0],j=H[1],F=b(0),W=(0,a.Z)(F,2),B=W[0],K=W[1],q=function(e){var n=l.useRef(null),t=l.useState(e),r=(0,a.Z)(t,2),i=r[0],c=r[1],s=l.useRef([]);return l.useEffect((function(){return function(){return n.current&&C.Z.cancel(n.current)}}),[]),[i,function(e){null===n.current&&(s.current=[],n.current=(0,C.Z)((function(){c((function(e){var t=e;return s.current.forEach((function(e){t=(0,o.Z)((0,o.Z)({},t),e)})),n.current=null,t}))}))),s.current.push(e)}]}(M),J=(0,a.Z)(q,2),Q=J[0],$=J[1],_=S(),ee=S({originX:0,originY:0,deltaX:0,deltaY:0}),ne=b(!1),te=(0,a.Z)(ne,2),re=te[0],oe=te[1],ie=R(y),ae=ie.previewUrls,ce=ie.current,se=ie.isPreviewGroup,le=ie.setCurrent,ue=ae.size,fe=Array.from(ae.keys()),de=fe.indexOf(ce),ve=se?ae.get(ce):c,me=se&&ue>1,pe=b({wheelDirection:0}),ge=(0,a.Z)(pe,2),we=ge[0],Ce=ge[1],Ze=function(){j((function(e){return e+1})),$(M)},he=function(){T>1&&j((function(e){return e-1})),$(M)},ye=f()((0,i.Z)({},"".concat(t,"-moving"),re)),ke="".concat(t,"-operations-operation"),Ee="".concat(t,"-operations-icon"),Pe=[{icon:U,onClick:v,type:"close"},{icon:O,onClick:Ze,type:"zoomIn"},{icon:G,onClick:he,type:"zoomOut",disabled:1===T},{icon:X,onClick:function(){K((function(e){return e+90}))},type:"rotateRight"},{icon:I,onClick:function(){K((function(e){return e-90}))},type:"rotateLeft"}],be=function(){if(h&&re){var e=_.current.offsetWidth*T,n=_.current.offsetHeight*T,t=_.current.getBoundingClientRect(),r=t.left,i=t.top,a=B%180!=0;oe(!1);var c=function(e,n,t,r){var i=(0,d.g1)(),a=i.width,c=i.height,s=null;return e<=a&&n<=c?s={x:0,y:0}:(e>a||n>c)&&(s=(0,o.Z)((0,o.Z)({},Z("x",t,e,a)),Z("y",r,n,c))),s}(a?n:e,a?e:n,r,i);c&&$((0,o.Z)({},c))}},Ne=function(e){h&&re&&$({x:e.pageX-ee.current.deltaX,y:e.pageY-ee.current.deltaY})},xe=function(e){if(h){e.preventDefault();var n=e.deltaY;Ce({wheelDirection:n})}},Se=x((function(e){h&&me&&(e.preventDefault(),e.keyCode===g.Z.LEFT?de>0&&le(fe[de-1]):e.keyCode===g.Z.RIGHT&&de<ue-1&&le(fe[de+1]))}),[de,ue,fe,le,me,h]);return N((function(){var e=we.wheelDirection;e>0?he():e<0&&Ze()}),[we]),N((function(){var e,n,t=(0,p.Z)(window,"mouseup",be,!1),r=(0,p.Z)(window,"mousemove",Ne,!1),o=(0,p.Z)(window,"wheel",xe,{passive:!1}),i=(0,p.Z)(window,"keydown",Se,!1);try{window.top!==window.self&&(e=(0,p.Z)(window.top,"mouseup",be,!1),n=(0,p.Z)(window.top,"mousemove",Ne,!1))}catch(a){(0,w.Kp)(!1,"[rc-image] ".concat(a))}return function(){t.remove(),r.remove(),o.remove(),i.remove(),e&&e.remove(),n&&n.remove()}}),[h,re,Se]),l.createElement(m.Z,(0,r.Z)({transitionName:"zoom",maskTransitionName:"fade",closable:!1,keyboard:!0,prefixCls:t,onClose:v,afterClose:function(){j(1),K(0),$(M)},visible:h,wrapClassName:ye,rootClassName:D},Y),l.createElement("ul",{className:"".concat(t,"-operations")},me&&l.createElement("li",{className:"".concat(t,"-operations-progress")},null!==(n=null==z?void 0:z(de+1,ue))&&void 0!==n?n:"".concat(de+1," / ").concat(ue)),Pe.map((function(e){var n=e.icon,r=e.onClick,o=e.type,a=e.disabled;return l.createElement("li",{className:f()(ke,(0,i.Z)({},"".concat(t,"-operations-operation-disabled"),!!a)),onClick:r,key:o},l.isValidElement(n)?l.cloneElement(n,{className:Ee}):n)}))),l.createElement("div",{className:"".concat(t,"-img-wrapper"),style:{transform:"translate3d(".concat(Q.x,"px, ").concat(Q.y,"px, 0)")}},l.createElement("img",{onMouseDown:function(e){0===e.button&&(e.preventDefault(),e.stopPropagation(),ee.current.deltaX=e.pageX-Q.x,ee.current.deltaY=e.pageY-Q.y,ee.current.originX=Q.x,ee.current.originY=Q.y,oe(!0))},onDoubleClick:function(){h&&(1!==T&&j(1),Q.x===M.x&&Q.y===M.y||$(M))},ref:_,className:"".concat(t,"-img"),src:ve,alt:u,style:{transform:"scale3d(".concat(T,", ").concat(T,", 1) rotate(").concat(B,"deg)")}})),me&&l.createElement("div",{className:f()("".concat(t,"-switch-left"),(0,i.Z)({},"".concat(t,"-switch-left-disabled"),0===de)),onClick:function(e){e.preventDefault(),e.stopPropagation(),de>0&&le(fe[de-1])}},V),me&&l.createElement("div",{className:f()("".concat(t,"-switch-right"),(0,i.Z)({},"".concat(t,"-switch-right-disabled"),de===ue-1)),onClick:function(e){e.preventDefault(),e.stopPropagation(),de<ue-1&&le(fe[de+1])}},L))};var z=["src","alt","onPreviewClose","prefixCls","previewPrefixCls","placeholder","fallback","width","height","style","preview","className","onClick","onError","wrapperClassName","wrapperStyle","rootClassName","crossOrigin","decoding","loading","referrerPolicy","sizes","srcSet","useMap"],Y=["src","visible","onVisibleChange","getContainer","mask","maskClassName","icons"],I=0,X=function(e){var n=e.src,t=e.alt,u=e.onPreviewClose,m=e.prefixCls,p=void 0===m?"rc-image":m,g=e.previewPrefixCls,w=void 0===g?"".concat(p,"-preview"):g,C=e.placeholder,Z=e.fallback,h=e.width,k=e.height,E=e.style,P=e.preview,b=void 0===P||P,N=e.className,x=e.onClick,S=e.onError,R=e.wrapperClassName,M=e.wrapperStyle,X=e.rootClassName,O=e.crossOrigin,G=e.decoding,U=e.loading,V=e.referrerPolicy,L=e.sizes,A=e.srcSet,H=e.useMap,T=(0,s.Z)(e,z),j=C&&!0!==C,F="object"===(0,c.Z)(b)?b:{},W=F.src,B=F.visible,K=void 0===B?void 0:B,q=F.onVisibleChange,J=void 0===q?u:q,Q=F.getContainer,$=void 0===Q?void 0:Q,_=F.mask,ee=F.maskClassName,ne=F.icons,te=(0,s.Z)(F,Y),re=null!=W?W:n,oe=void 0!==K,ie=(0,v.Z)(!!K,{value:K,onChange:J}),ae=(0,a.Z)(ie,2),ce=ae[0],se=ae[1],le=(0,l.useState)(j?"loading":"normal"),ue=(0,a.Z)(le,2),fe=ue[0],de=ue[1],ve=(0,l.useState)(null),me=(0,a.Z)(ve,2),pe=me[0],ge=me[1],we="error"===fe,Ce=l.useContext(y),Ze=Ce.isPreviewGroup,he=Ce.setCurrent,ye=Ce.setShowPreview,ke=Ce.setMousePosition,Ee=Ce.registerImage,Pe=l.useState((function(){return I+=1})),be=(0,a.Z)(Pe,1)[0],Ne=b&&!we,xe=l.useRef(!1),Se=function(){de("normal")};l.useEffect((function(){return Ee(be,re)}),[]),l.useEffect((function(){Ee(be,re,Ne)}),[re,Ne]),l.useEffect((function(){we&&de("normal"),j&&!xe.current&&de("loading")}),[n]);var Re=f()(p,R,X,(0,i.Z)({},"".concat(p,"-error"),we)),Me=we&&Z?Z:re,De={crossOrigin:O,decoding:G,loading:U,referrerPolicy:V,sizes:L,srcSet:A,useMap:H,alt:t,className:f()("".concat(p,"-img"),(0,i.Z)({},"".concat(p,"-img-placeholder"),!0===C),N),style:(0,o.Z)({height:k},E)};return l.createElement(l.Fragment,null,l.createElement("div",(0,r.Z)({},T,{className:Re,onClick:Ne?function(e){if(!oe){var n=(0,d.os)(e.target),t=n.left,r=n.top;Ze?(he(be),ke({x:t,y:r})):ge({x:t,y:r})}Ze?ye(!0):se(!0),x&&x(e)}:x,style:(0,o.Z)({width:h,height:k},M)}),l.createElement("img",(0,r.Z)({},De,{ref:function(e){xe.current=!1,"loading"===fe&&(null==e?void 0:e.complete)&&(e.naturalWidth||e.naturalHeight)&&(xe.current=!0,Se())}},we&&Z?{src:Z}:{onLoad:Se,onError:function(e){S&&S(e),de("error")},src:n})),"loading"===fe&&l.createElement("div",{"aria-hidden":"true",className:"".concat(p,"-placeholder")},C),_&&Ne&&l.createElement("div",{className:f()("".concat(p,"-mask"),ee)},_)),!Ze&&Ne&&l.createElement(D,(0,r.Z)({"aria-hidden":!ce,visible:ce,prefixCls:w,onClose:function(e){e.stopPropagation(),se(!1),oe||ge(null)},mousePosition:pe,src:Me,alt:t,getContainer:$,icons:ne,rootClassName:X},te)))};X.PreviewGroup=E,X.displayName="Image";const O=X}}]);